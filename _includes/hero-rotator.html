<style>
  .hero-rotator {
    position: relative;
    width: 100%;
    max-height: 340px;
    overflow: hidden;
    border-radius: 16px;
    margin: 18px 0 22px 0;
    background: #0b0f14;
  }

  .hero-rotator .slide {
    position: absolute;
    inset: 0;
    opacity: 0;
    transform: scale(1.02);
    transition: opacity 900ms ease, transform 1200ms ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .hero-rotator .slide.active {
    opacity: 1;
    transform: scale(1);
  }

  .hero-rotator img,
  .hero-rotator video {
    width: 100%;
    height: 340px;
    object-fit: cover;
    display: block;
  }

  .hero-rotator .overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      90deg,
      rgba(0,0,0,0.55),
      rgba(0,0,0,0.15),
      rgba(0,0,0,0.35)
    );
    pointer-events: none;
  }

  .hero-rotator .caption {
    position: absolute;
    left: 18px;
    bottom: 14px;
    right: 18px;
    color: #fff;
    font-weight: 650;
    font-size: 18px;
    text-shadow: 0 2px 18px rgba(0,0,0,0.55);
    line-height: 1.25;
    z-index: 3;
  }

  .hero-rotator .dots {
    position: absolute;
    right: 14px;
    bottom: 14px;
    display: flex;
    gap: 8px;
    z-index: 4;
  }

  .hero-rotator .dot {
    width: 9px;
    height: 9px;
    border-radius: 999px;
    background: rgba(255,255,255,0.45);
    border: 1px solid rgba(255,255,255,0.25);
    cursor: pointer;
  }

  .hero-rotator .dot.active {
    background: rgba(255,255,255,0.95);
  }

  @media (max-width: 768px) {
    .hero-rotator img,
    .hero-rotator video { height: 220px; }
    .hero-rotator { max-height: 220px; }
    .hero-rotator .caption { font-size: 15px; }
  }
</style>

<div class="hero-rotator" id="heroRotator">
  <!-- Slide 1 -->
  <div class="slide active" data-type="image">
    <img src="/images/Retinal_imaging_modalities.png" alt="Retinal imaging">
  </div>

  <!-- Slide 2 -->
  <div class="slide" data-type="image">
    <img src="/images/Systemic_Health.png" alt="Retina–systemic loop">
  </div>

  <!-- Slide 3 -->
  <div class="slide" data-type="image">
    <img src="/images/oculomics_wheel.png" alt="Oculomics modalities">
  </div>

  <!-- Slide 4 (video) -->
  <div class="slide" data-type="video" data-duration="5000">
    <video muted playsinline preload="metadata">
      <source src="/files/Fragmentaing%20data.mp4" type="video/mp4">
    </video>
  </div>

  <div class="overlay"></div>

  <div class="caption">
    Retinal imaging • multi-omics • clinical phenotypes • interpretable AI
  </div>

  <div class="dots" id="heroDots"></div>
</div>

<script>
  (function () {
    const rotator = document.getElementById("heroRotator");
    if (!rotator) return;

    const slides = Array.from(rotator.querySelectorAll(".slide"));
    const dotsWrap = document.getElementById("heroDots");

    let idx = 0;
    let timer = null;

    function buildDots() {
      if (!dotsWrap) return;
      dotsWrap.innerHTML = "";
      slides.forEach((_, i) => {
        const d = document.createElement("div");
        d.className = "dot" + (i === 0 ? " active" : "");
        d.addEventListener("click", () => goTo(i));
        dotsWrap.appendChild(d);
      });
    }

    function setDot(i) {
      if (!dotsWrap) return;
      Array.from(dotsWrap.children).forEach((d, k) => {
        d.classList.toggle("active", k === i);
      });
    }

    function stopAllVideos() {
      slides.forEach(s => {
        const v = s.querySelector("video");
        if (v) {
          v.pause();
          v.currentTime = 0;
        }
      });
    }

    function getDurationFor(slide) {
      const t = slide.getAttribute("data-type");
      if (t === "video") {
        const d = parseInt(slide.getAttribute("data-duration") || "6000", 10);
        return isNaN(d) ? 6000 : d;
      }
      return 4000;
    }

    function goTo(newIdx) {
      clearTimeout(timer);
      stopAllVideos();

      slides[idx].classList.remove("active");
      idx = (newIdx + slides.length) % slides.length;
      slides[idx].classList.add("active");
      setDot(idx);

      const active = slides[idx];
      const type = active.getAttribute("data-type");
      const dur = getDurationFor(active);

      if (type === "video") {
        const v = active.querySelector("video");
        if (v) v.play().catch(() => {});
      }

      timer = setTimeout(() => goTo(idx + 1), dur);
    }

    buildDots();
    timer = setTimeout(() => goTo(1), getDurationFor(slides[0]));
  })();
</script>
